/*
Задача 1. Среднее арифметическое чисел
Ввести с клавиатуры массив из 5 элементов, найти среднее арифметическое
всех элементов массива.
Данные на входе: 5 целых ненулевых чисел через пробел
Данные на выходе: Одно число в формате "%.3f"
Пример №1
Данные на входе: 4 15 3 10 14
Данные на выходе: 9.200
Пример №2
Данные на входе: 1 2 3 4 5
Данные на выходе: 3.000

-----
Задача 2. Найти минимум
Ввести с клавиатуры массив из 5 элементов, найти минимальный из них.
Данные на входе: 5 целых чисел через пробел
Данные на выходе: Одно единственное целое число
Пример №1
Данные на входе: 4 15 3 10 14
Данные на выходе: 3
Пример №2
Данные на входе: 1 2 3 4 -5
Данные на выходе: -5

-----
Задача 3. Циклический сдвиг массива вправо на 4
Считать массив из 12 элементов и выполнить циклический сдвиг ВПРАВО на 4
элемента.
Данные на входе: 12 целых чисел через пробел
Данные на выходе: 12 целых чисел через пробел
Пример №1
Данные на входе: 4 -5 3 10 -4 -6 8 -10 1 0 5 7
Данные на выходе: 1 0 5 7 4 -5 3 10 -4 -6 8 -10
Пример №2
Данные на входе: 1 2 3 4 5 6 7 8 9 10 11 12
Данные на выходе: 9 10 11 12 1 2 3 4 5 6 7 8

-----
Задача 4. Отсортировать по последней цифре
Считать массив из 10 элементов и отсортировать его по последней цифре.
Данные на входе: 10 целых чисел через пробел
Этот же массив отсортированный по последней цифре
Пример №1
Данные на входе: 14 25 13 30 76 58 32 11 41 97
Данные на выходе: 30 11 41 32 13 14 25 76 97 58
Пример №2
Данные на входе: 109 118 100 51 62 73 1007 16 4 555
Данные на выходе: 100 51 62 73 4 555 16 1007 118 109

-----
Задача 5. Вторая с конца ноль
Считать массив из 10 элементов и отобрать в другой массив все числа, у
которых вторая с конца цифра (число десятков) – ноль.
Данные на входе: 10 целых чисел через пробел.
Данные на выходе: Целые числа через пробел, у которых вторая с конца
цифра - ноль
Пример
Данные на входе: 40 105 203 1 14 1000 22 33 44 55
Данные на выходе: 105 203 1 1000

-----
Задача 6. Чаще других
Дан массив из 10 элементов. Определить, какое число в массиве встречается
чаще всего. Гарантируется, что такое число ровно 1.
Данные на входе: 10 целых числе через пробел
Данные на выходе: Одно число, которое встречается чаще других.
Пример
Данные на входе: 4 1 2 1 11 2 34 11 0 11
Данные на выходе: 11

*/

#include <stdio.h>
#include <conio.h>
#include <locale.h>
#include <string.h>
#include <ctype.h>
#include <limits.h>

// 1. Среднее арифметическое чисел
void task1()
{
    printf("решение в файле 'task1.c'");
}

// 2. Ввести с клавиатуры массив из 5 элементов, найти минимальный из них.
int findMin(int arr[], int size)
{
    int min = arr[0]; // Предполагаем, что первый элемент является минимальным

    // Ищем минимальный элемент, сравнивая каждый элемент с текущим минимальным
    for (int i = 1; i < size; i++)
    {
        if (arr[i] < min)
        {
            min = arr[i];
        }
    }

    return min;
}

void task2()
{
    int arr[5]; // Создаем массив из 5 элементов
    printf("Введите 5 целых чисел через пробел: ");

    // Считываем введенные числа в массив
    for (int i = 0; i < 5; i++)
    {
        scanf("%d", &arr[i]);
    }

    // Находим минимальный элемент с помощью функции
    int min = findMin(arr, 5);

    printf("Минимальный элемент: %d\n", min);
}

// 3. Считать массив из 12 элементов и выполнить циклический сдвиг ВПРАВО на 4 элемента.
void rightRotate(int arr[], int n, int k)
{
    // Создаем временный массив для сохранения последних k элементов
    int temp[k];
    for (int i = 0; i < k; i++)
    {
        // Сохраняем последние k элемента во временный массив
        temp[i] = arr[n - k + i];
    }
    // Сдвигаем элементы массива на k позиции вправо
    for (int i = n - 1; i >= k; i--)
    {
        arr[i] = arr[i - k];
    }
    // Перемещаем сохраненные элементы из временного массива в начало массива
    for (int i = 0; i < k; i++)
    {
        arr[i] = temp[i];
    }
}

#define TASK3_ELEMENTS 4

void task3()
{
    int arr[12];

    printf("Введите 12 целых чисел через пробел: ");
    for (int i = 0; i < 12; i++)
    {
        scanf("%d", &arr[i]);
    }

    rightRotate(arr, 12, TASK3_ELEMENTS);

    printf("Массив после циклического сдвига вправо на %d элемента:\n", TASK3_ELEMENTS);
    for (int i = 0; i < 12; i++)
    {
        printf("%d ", arr[i]);
    }
}

// 4. Считать массив из 10 элементов и отсортировать его по последней цифре.
void sortByLastDigit(int arr[], int size)
{
    // Применяем алгоритм сортировки пузырьком
    for (int i = 0; i < size - 1; i++)
    {
        for (int j = 0; j < size - i - 1; j++)
        {
            // Получаем последние цифры чисел
            int lastDigit1 = arr[j] % 10;
            int lastDigit2 = arr[j + 1] % 10;

            // Если последняя цифра в следующем числе меньше,
            // меняем местами элементы в массиве
            if (lastDigit1 > lastDigit2)
            {
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}

void task4()
{
    int arr[10];

    // Читаем массив из 10 элементов
    printf("Введите 10 целых чисел: ");
    for (int i = 0; i < 10; i++)
    {
        scanf("%d", &arr[i]);
    }

    // Сортируем массив по последней цифре
    sortByLastDigit(arr, 10);

    // Выводим отсортированный массив
    printf("Отсортированный массив: ");
    for (int i = 0; i < 10; i++)
    {
        printf("%d ", arr[i]);
    }
}

// 5. Считать массив из 10 элементов и отобрать в другой массив все числа, у которых вторая с конца цифра (число десятков) – ноль.
void task5()
{
    int arr[10];                          // создаем массив из 10 элементов
    int n = sizeof(arr) / sizeof(arr[0]); // определяем размер массива

    // считываем 10 чисел из входных данных
    printf("Введите 10 целых чисел: ");
    for (int i = 0; i < n; i++)
    {
        scanf("%d", &arr[i]);
    }

    int result[n]; // создаем массив для хранения отобранных чисел
    int count = 0; // счетчик отобранных чисел

    // отбираем числа у которых вторая с конца цифра - ноль
    for (int i = 0; i < n; i++)
    {
        int num = arr[i];
        int tens = (num / 10) % 10; // находим вторую с конца цифру

        if (tens == 0)
        {
            result[count] = num; // добавляем число в отобранные
            count++;
        }
    }

    // выводим отобранные числа
    printf("result: ");
    for (int i = 0; i < count; i++)
    {
        printf("%d ", result[i]);
    }
    printf("\n");
}

// 6. Дан массив из 10 элементов. Определить, какое число в массиве встречается чаще всего.
void task6()
{
    int arr[10];
    int frequency[20] = {0}; // новый массив для хранения уникальных чисел и их счетчиков

    printf("Введите 10 целых чисел через пробел: ");
    for (int i = 0; i < 10; i++)
    {
        scanf("%d", &arr[i]);

        // используем линейный поиск для проверки, есть ли уже число в новом массиве
        int index = -1;
        for (int j = 0; j < i; j++)
        {
            if (arr[i] == frequency[2 * j])
            {
                index = j;
                break;
            }
        }

        // если число уже есть, увеличиваем его счетчик в новом массиве
        // иначе добавляем новое число в новый массив
        if (index != -1)
        {
            frequency[2 * index + 1]++;
        }
        else
        {
            frequency[2 * i] = arr[i];
            frequency[2 * i + 1] = 1;
        }
    }

    // находим число с наибольшим счетчиком в новом массиве
    int maxCount = frequency[1];
    int mostFrequentNum = frequency[0];

    for (int i = 3; i < 20; i += 2)
    {
        if (frequency[i] > maxCount)
        {
            maxCount = frequency[i];
            mostFrequentNum = frequency[i - 1];
        }
    }

    printf("Наиболее часто встречающееся число: %d\n", mostFrequentNum);
}

void pressAnyKey()
{
    // очистка буфера ввода с помощью fflush(stdin)
    if (fflush(stdin) == EOF)
    {
        // если функция fflush(stdin) вернула ошибку, то выводим сообщение
        printf("Ошибка при очистке буфера ввода\n");
        return;
    }

    printf("\nНажмите любую клавишу для продолжения...");
    getch(); // приостановка программы
}

// MAIN
int main()
{
    setlocale(LC_ALL, "Rus");

    int choice;
    int exit = 0;

    while (!exit)
    {
        printf("\n-----------------------------\n");
        printf("1. Среднее арифметическое чисел.\n");
        printf("2. Ввести с клавиатуры массив из 5 элементов, найти минимальный из них.\n");
        printf("3. Выполнить циклический сдвиг ВПРАВО на 4 элемента.\n");
        printf("4. Отсортировать его по последней цифре.\n");
        printf("5. Отобрать в другой массив все числа, у которых вторая с конца цифра (число десятков) – ноль.\n");
        printf("6. Определить, какое число в массиве встречается чаще всего.\n");

        printf("<<< Выберите пункт меню или введите иное для выхода: ");

        if (scanf("%d", &choice) != 1)
        {
            choice = -1;
        }
        printf(">>>\n");

        switch (choice)
        {
        case 1:
            task1();
            break;

        case 2:
            task2();
            break;

        case 3:
            task3();
            break;

        case 4:
            task4();
            break;

        case 5:
            task5();
            break;

        case 6:
            task6();
            break;

        default:
            exit = 1;
            printf("END\n");
        }

        if (exit == 1)
        {
            break;
        }
        pressAnyKey();
    }

    return 0;
}
